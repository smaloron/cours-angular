<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-08-19T13:46:13.029138"><title>Module 6 : L'essentiel - Services et Injection de D&eacute;pendances | Angular</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-organiser-la-logique-de-votre-application","level":0,"title":"Introduction : Organiser la logique de votre application","anchor":"#introduction-organiser-la-logique-de-votre-application"},{"id":"1-le-r-le-des-services","level":0,"title":"1. Le Rôle des Services","anchor":"#1-le-r-le-des-services"},{"id":"2-cr-er-un-service-avec-injectable","level":0,"title":"2. Créer un Service avec @Injectable","anchor":"#2-cr-er-un-service-avec-injectable"},{"id":"3-l-injection-de-d-pendances","level":0,"title":"3. L\u0027Injection de Dépendances","anchor":"#3-l-injection-de-d-pendances"},{"id":"exercice-pratique","level":0,"title":"Exercice pratique","anchor":"#exercice-pratique"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-de-cette-partie","level":0,"title":"Conclusion de cette partie","anchor":"#conclusion-de-cette-partie"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 6 : L'essentiel - Services et Injection de D&eacute;pendances | Angular"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Angular Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/006-00-services-and-di.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 6 : L'essentiel - Services et Injection de D&eacute;pendances | Angular"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/006-00-services-and-di.html#webpage",
    "url": "writerside-documentation/006-00-services-and-di.html",
    "name": "Module 6 : L'essentiel - Services et Injection de D&eacute;pendances | Angular",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Angular Help"
}</script><!-- End Schema.org --></head><body data-id="006-00-services-and-di" data-main-title="Module 6 : L'essentiel - Services et Injection de Dépendances" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Angular  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="006-00-services-and-di" id="006-00-services-and-di.md">Module 6 : L'essentiel - Services et Injection de Dépendances</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="-x9pjhb_11">&Agrave; la fin de ce chapitre, vous serez capable de :</p><ul class="list _bullet" id="-x9pjhb_12"><li class="list__item" id="-x9pjhb_13"><p id="-x9pjhb_18"><span class="control" id="-x9pjhb_19">Expliquer</span> le r&ocirc;le et l'importance des services dans une architecture Angular.</p></li><li class="list__item" id="-x9pjhb_14"><p id="-x9pjhb_20"><span class="control" id="-x9pjhb_21">Cr&eacute;er</span> un service en utilisant le d&eacute;corateur <code class="code" id="-x9pjhb_22">@Injectable</code>.</p></li><li class="list__item" id="-x9pjhb_15"><p id="-x9pjhb_23"><span class="control" id="-x9pjhb_24">Comprendre</span> la signification de <code class="code" id="-x9pjhb_25">providedIn: 'root'</code> pour cr&eacute;er des services singletons.</p></li><li class="list__item" id="-x9pjhb_16"><p id="-x9pjhb_26"><span class="control" id="-x9pjhb_27">Utiliser</span> l'injection de d&eacute;pendances par constructeur pour fournir un service &agrave; un composant.</p></li><li class="list__item" id="-x9pjhb_17"><p id="-x9pjhb_28"><span class="control" id="-x9pjhb_29">Appliquer</span> le Principe de Responsabilit&eacute; Unique (SRP) en d&eacute;pla&ccedil;ant la logique m&eacute;tier hors des composants.</p></li></ul></section><section class="chapter"><h2 id="introduction-organiser-la-logique-de-votre-application" data-toc="introduction-organiser-la-logique-de-votre-application">Introduction : Organiser la logique de votre application</h2><p id="-x9pjhb_30">Jusqu'&agrave; pr&eacute;sent, nous avons mis toutes nos donn&eacute;es et notre logique directement dans les composants. Pour nos petits exemples, c'&eacute;tait parfait. Mais imaginez une application r&eacute;elle :</p><ul class="list _bullet" id="-x9pjhb_31"><li class="list__item" id="-x9pjhb_35"><p id="-x9pjhb_38">Le <code class="code" id="-x9pjhb_39">UserListComponent</code> a besoin de la liste des utilisateurs.</p></li><li class="list__item" id="-x9pjhb_36"><p id="-x9pjhb_40">Le <code class="code" id="-x9pjhb_41">UserProfileComponent</code> a besoin des d&eacute;tails d'un utilisateur sp&eacute;cifique.</p></li><li class="list__item" id="-x9pjhb_37"><p id="-x9pjhb_42">Le <code class="code" id="-x9pjhb_43">UserFormComponent</code> a besoin de cr&eacute;er un nouvel utilisateur.</p></li></ul><p id="-x9pjhb_32">Devons-nous dupliquer la logique pour r&eacute;cup&eacute;rer, cr&eacute;er ou manipuler les utilisateurs dans chaque composant ? Absolument pas. Ce serait un cauchemar &agrave; maintenir.</p><p id="-x9pjhb_33">C'est l&agrave; qu'interviennent les <span class="control" id="-x9pjhb_44">Services</span>. Un service est une simple classe TypeScript dont le but est tr&egrave;s pr&eacute;cis : fournir une fonctionnalit&eacute; sp&eacute;cifique (la &quot;logique m&eacute;tier&quot;) et &ecirc;tre partageable entre plusieurs composants.</p><p id="-x9pjhb_34"><span class="control" id="-x9pjhb_45">Pour vous, d&eacute;veloppeurs Java, la transition est directe.</span> Pensez &agrave; un composant Angular comme &agrave; un <code class="code" id="-x9pjhb_46">@RestController</code> Spring. Son r&ocirc;le est de g&eacute;rer la pr&eacute;sentation et de d&eacute;l&eacute;guer le travail &agrave; d'autres classes. Et ces autres classes, ce sont les <span class="control" id="-x9pjhb_47"><code class="code" id="-x9pjhb_49">@Service</code></span> en Spring, et les <span class="control" id="-x9pjhb_48"><code class="code" id="-x9pjhb_50">@Injectable</code></span> en Angular. Ce module, c'est votre terrain de jeu.</p></section><section class="chapter"><h2 id="1-le-r-le-des-services" data-toc="1-le-r-le-des-services">1. Le R&ocirc;le des Services</h2><p id="-x9pjhb_51">Un service est le lieu id&eacute;al pour centraliser :</p><ul class="list _bullet" id="-x9pjhb_52"><li class="list__item" id="-x9pjhb_55"><p id="-x9pjhb_58">La <span class="control" id="-x9pjhb_59">logique m&eacute;tier</span> qui n'est pas li&eacute;e &agrave; une vue sp&eacute;cifique (ex: des calculs complexes).</p></li><li class="list__item" id="-x9pjhb_56"><p id="-x9pjhb_60">La <span class="control" id="-x9pjhb_61">communication avec une source de donn&eacute;es externe</span> (une API REST, le <code class="code" id="-x9pjhb_62">localStorage</code> du navigateur, un WebSocket...).</p></li><li class="list__item" id="-x9pjhb_57"><p id="-x9pjhb_63">Le <span class="control" id="-x9pjhb_64">partage d'&eacute;tat</span> entre des composants qui n'ont pas de lien de parent&eacute; direct.</p></li></ul><p id="-x9pjhb_53">En extrayant cette logique dans un service, vous respectez le <span class="control" id="-x9pjhb_65">Principe de Responsabilit&eacute; Unique (Single Responsibility Principle - SRP)</span>:</p><ul class="list _bullet" id="-x9pjhb_54"><li class="list__item" id="-x9pjhb_66"><p id="-x9pjhb_68"><span class="control" id="-x9pjhb_69">Le Composant :</span> Sa seule responsabilit&eacute; est de pr&eacute;senter des donn&eacute;es &agrave; l'utilisateur et de d&eacute;l&eacute;guer les actions de l'utilisateur. C'est un chef d'orchestre.</p></li><li class="list__item" id="-x9pjhb_67"><p id="-x9pjhb_70"><span class="control" id="-x9pjhb_71">Le Service :</span> Sa responsabilit&eacute; est de faire le &quot;vrai&quot; travail : aller chercher les donn&eacute;es, les traiter, les sauvegarder. C'est l'expert sp&eacute;cialiste.</p></li></ul></section><section class="chapter"><h2 id="2-cr-er-un-service-avec-injectable" data-toc="2-cr-er-un-service-avec-injectable">2. Cr&eacute;er un Service avec <code class="code" id="-x9pjhb_76">@Injectable</code></h2><p id="-x9pjhb_73">Un service n'est qu'une classe, mais pour qu'Angular puisse l'injecter dans d'autres classes, on utilise le d&eacute;corateur <code class="code" id="-x9pjhb_77">@Injectable</code>.</p><section class="procedure-steps"><h3 id="create-user-service" data-toc="create-user-service">Création d'un Service Utilisateur</h3><ol class="list _decimal"><li class="list__item" id="-x9pjhb_78"><p><b id="-x9pjhb_80">G&eacute;n&eacute;rer le service avec la CLI :</b></p><p id="-x9pjhb_81">Comme toujours, la CLI nous simplifie la vie.</p><p> <code class="code" id="-x9pjhb_82">ng generate service shared/services/user # ou : ng g s shared/services/user</code></p><p id="-x9pjhb_83">Cela cr&eacute;e le fichier <code class="code" id="-x9pjhb_84">user.service.ts</code>.</p></li><li class="list__item" id="-x9pjhb_79"><p><b id="-x9pjhb_85">Analyser le code g&eacute;n&eacute;r&eacute; :</b></p><p id="-x9pjhb_86">Ouvrez le fichier <code class="code" id="-x9pjhb_89">user.service.ts</code>.</p><div class="code-block" data-lang="ts">
// Fichier: src/app/shared/services/user.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class UserService {

  constructor() { }
}
</div><p id="-x9pjhb_88">Le point cl&eacute; est <code class="code" id="-x9pjhb_90">@Injectable({ providedIn: 'root' })</code>.</p></li></ol></section><section class="chapter"><h3 id="providedin-root-le-singleton-par-d-faut" data-toc="providedin-root-le-singleton-par-d-faut"><code class="code" id="-x9pjhb_97">providedIn: 'root'</code>: Le Singleton par D&eacute;faut</h3><p id="-x9pjhb_92">Cette petite ligne est extr&ecirc;mement puissante. Elle dit &agrave; Angular :</p><ol class="list _decimal" id="-x9pjhb_93" type="1"><li class="list__item" id="-x9pjhb_98"><p id="-x9pjhb_101">&quot;Ce service doit &ecirc;tre fourni &agrave; la racine (<code class="code" id="-x9pjhb_102">root</code>) de l'application.&quot;</p></li><li class="list__item" id="-x9pjhb_99"><p id="-x9pjhb_103">&quot;Cr&eacute;e une <span class="control" id="-x9pjhb_104">unique instance (un singleton)</span> de ce service pour toute l'application.&quot;</p></li><li class="list__item" id="-x9pjhb_100"><p id="-x9pjhb_105">&quot;N'importe quel composant, service ou autre classe de l'application peut demander &agrave; se le faire injecter.&quot;</p></li></ol><p id="-x9pjhb_94"><span class="control" id="-x9pjhb_106">Analogie Java : C'est l'&eacute;quivalent exact d'une annotation <code class="code" id="-x9pjhb_107">@Service</code> ou <code class="code" id="-x9pjhb_108">@Component</code> sur une classe Spring.</span> Par d&eacute;faut, Spring cr&eacute;e aussi un bean singleton disponible dans tout le contexte de l'application. La philosophie est identique.</p><p id="-x9pjhb_95">Maintenant, ajoutons une m&eacute;thode &agrave; notre service pour simuler la r&eacute;cup&eacute;ration de donn&eacute;es.</p><div class="code-block" data-lang="ts">
// Fichier: src/app/shared/services/user.service.ts
import {Injectable} from '@angular/core';
import {User} from '../models/user.model'; // Notre interface User

@Injectable({
    providedIn: 'root'
})
export class UserService {
    // Une liste d'utilisateurs &quot;en dur&quot; pour l'instant
    private users: User[] = [
        {id: 1, name: 'Alice', jobTitle: 'Dev', avatarUrl: '...'},
        {id: 2, name: 'Bob', jobTitle: 'PO', avatarUrl: '...'},
        {id: 3, name: 'Charlie', jobTitle: 'UX', avatarUrl: '...'}
    ];

    constructor() {
    }

    public getUsers(): User[] {
        console.log(&quot;UserService: Fourniture de la liste des utilisateurs.&quot;);
        return this.users;
    }

    public getUserById(id: number): User | undefined {
        return this.users.find(user =&gt; user.id === id);
    }
}
</div></section></section><section class="chapter"><h2 id="3-l-injection-de-d-pendances" data-toc="3-l-injection-de-d-pendances">3. L'Injection de D&eacute;pendances</h2><p id="-x9pjhb_109">Maintenant que notre service est pr&ecirc;t et &quot;fourni &agrave; la racine&quot;, comment un composant peut-il l'utiliser ? Gr&acirc;ce &agrave; l'* <span class="emphasis" id="-x9pjhb_115">injection de d&eacute;pendances par constructeur</span>*.</p><p id="-x9pjhb_110">C'est exactement comme en Spring : vous d&eacute;clarez la d&eacute;pendance comme un argument du constructeur, et le framework s'occupe du reste.</p><p id="-x9pjhb_111">Voyons comment <code class="code" id="-x9pjhb_116">UserListComponent</code> peut utiliser <code class="code" id="-x9pjhb_117">UserService</code>.</p><div class="code-block" data-lang="ts">
// Fichier: src/app/user-list/user-list.component.ts
import {Component} from '@angular/core';
import {User} from '../shared/models/user.model';
import {UserService} from '../shared/services/user.service'; // 1. Importer le service

@Component({ /* ... */})
export class UserListComponent {
    public users: User[] = [];

    // 2. Injecter le service dans le constructeur.
    // La syntaxe &quot;private userService: UserService&quot; est le raccourci TypeScript
    // qui déclare et initialise la propriété &quot;userService&quot; en une seule fois.
    constructor(private userService: UserService) {
        // 3. Utiliser le service pour récupérer les données.
        this.users = this.userService.getUsers();
    }
}
</div><p id="-x9pjhb_113">C'est tout ! Le composant n'a plus &agrave; se soucier de <span class="emphasis" id="-x9pjhb_118">comment</span> les utilisateurs sont cr&eacute;&eacute;s ou r&eacute;cup&eacute;r&eacute;s. Il fait simplement confiance au <code class="code" id="-x9pjhb_119">UserService</code> pour lui fournir les donn&eacute;es. C'est propre, d&eacute;coupl&eacute; et facile &agrave; tester.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="496px" preserveAspectRatio="none" style="width:786px;height:496px;background:#FFFFFF;" version="1.1" viewBox="0 0 786 496" width="786px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="184" x="294.275" y="23.5352">Injection de D&#233;pendances</text><!--cluster Framework Angular--><g id="cluster_Framework Angular"><path d="M138.5,43.4883 L278.5,43.4883 A5.25,5.25 0 0 1 282,46.9883 L289,65.9766 L288.5,65.9766 A3.5,3.5 0 0 1 292,69.4766 L292,127.4783 A3.5,3.5 0 0 1 288.5,130.9783 L138.5,130.9783 A3.5,3.5 0 0 1 135,127.4783 L135,46.9883 A3.5,3.5 0 0 1 138.5,43.4883 " fill="none" style="stroke:#696969;stroke-width:1.0;"/><line style="stroke:#696969;stroke-width:1.0;" x1="135" x2="289" y1="65.9766" y2="65.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="141" x="139" y="59.0234">Framework Angular</text></g><!--cluster fr--><g id="cluster_fr"><path d="M9.5,214.9783 L20.5,214.9783 A5.25,5.25 0 0 1 24,218.4783 L31,237.4666 L722.5,237.4666 A3.5,3.5 0 0 1 726,240.9666 L726,486.0783 A3.5,3.5 0 0 1 722.5,489.5783 L9.5,489.5783 A3.5,3.5 0 0 1 6,486.0783 L6,218.4783 A3.5,3.5 0 0 1 9.5,214.9783 " fill="none" style="stroke:#696969;stroke-width:1.0;"/><line style="stroke:#696969;stroke-width:1.0;" x1="6" x2="31" y1="237.4666" y2="237.4666"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="12" x="10" y="230.5134">fr</text></g><!--cluster formation--><g id="cluster_formation"><path d="M33.5,257.9783 L104.5,257.9783 A5.25,5.25 0 0 1 108,261.4783 L115,280.4666 L698.5,280.4666 A3.5,3.5 0 0 1 702,283.9666 L702,462.0783 A3.5,3.5 0 0 1 698.5,465.5783 L33.5,465.5783 A3.5,3.5 0 0 1 30,462.0783 L30,261.4783 A3.5,3.5 0 0 1 33.5,257.9783 " fill="none" style="stroke:#696969;stroke-width:1.0;"/><line style="stroke:#696969;stroke-width:1.0;" x1="30" x2="115" y1="280.4666" y2="280.4666"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="72" x="34" y="273.5134">formation</text></g><!--cluster spring--><g id="cluster_spring"><path d="M57.5,300.9783 L102.5,300.9783 A5.25,5.25 0 0 1 106,304.4783 L113,323.4666 L674.5,323.4666 A3.5,3.5 0 0 1 678,326.9666 L678,438.0783 A3.5,3.5 0 0 1 674.5,441.5783 L57.5,441.5783 A3.5,3.5 0 0 1 54,438.0783 L54,304.4783 A3.5,3.5 0 0 1 57.5,300.9783 " fill="none" style="stroke:#696969;stroke-width:1.0;"/><line style="stroke:#696969;stroke-width:1.0;" x1="54" x2="113" y1="323.4666" y2="323.4666"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="46" x="58" y="316.5134">spring</text></g><g id="elem_DI"><rect fill="#F1F1F1" height="36.4883" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="163" y="78.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="170" y="94.0234">Container DI</text><line style="stroke:#181818;stroke-width:0.5;" x1="164" x2="262" y1="98.9766" y2="98.9766"/></g><!--class UserListComponent--><g id="elem_UserListComponent"><rect codeLine="10" fill="#F1F1F1" height="80.9766" id="UserListComponent" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="70" y="340.2883"/><ellipse cx="138.25" cy="356.2883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M141.2231,361.9313 Q140.6421,362.2302 140.0029,362.3796 Q139.3638,362.529 138.6582,362.529 Q136.1514,362.529 134.8315,360.8771 Q133.5117,359.2253 133.5117,356.1042 Q133.5117,352.9748 134.8315,351.3229 Q136.1514,349.6711 138.6582,349.6711 Q139.3638,349.6711 140.0112,349.8205 Q140.6587,349.9699 141.2231,350.2688 L141.2231,352.9914 Q140.5923,352.4104 139.9988,352.1406 Q139.4053,351.8708 138.7744,351.8708 Q137.4297,351.8708 136.7449,352.9375 Q136.0601,354.0041 136.0601,356.1042 Q136.0601,358.196 136.7449,359.2626 Q137.4297,360.3293 138.7744,360.3293 Q139.4053,360.3293 139.9988,360.0595 Q140.5923,359.7897 141.2231,359.2087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="158.75" y="361.5793">UserListComponent</text><line style="stroke:#181818;stroke-width:0.5;" x1="71" x2="349" y1="372.2883" y2="372.2883"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="78" y="383.0324"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="90" y="389.8234">userService: UserService</text><line style="stroke:#181818;stroke-width:0.5;" x1="71" x2="349" y1="396.7766" y2="396.7766"/><ellipse cx="81" cy="410.5207" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="254" x="90" y="414.3117">constructor(userService: UserService)</text></g><!--class UserService--><g id="elem_UserService"><rect codeLine="15" fill="#F1F1F1" height="89.5977" id="UserService" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="516.5" y="335.9783"/><ellipse cx="546.8" cy="356.2888" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M546.2834,356.8518 Q544.4323,356.1462 543.7766,355.3701 Q543.1208,354.594 543.1208,353.2825 Q543.1208,351.5974 544.1999,350.6345 Q545.279,349.6716 547.1633,349.6716 Q548.0183,349.6716 548.8732,349.8667 Q549.7282,350.0618 550.5666,350.4436 L550.5666,352.8342 Q549.778,352.2781 548.9646,351.9876 Q548.1511,351.697 547.3542,351.697 Q546.466,351.697 545.9929,352.054 Q545.5197,352.4109 545.5197,353.075 Q545.5197,353.5896 545.8642,353.9258 Q546.2087,354.262 547.3044,354.6687 L548.3586,355.0671 Q549.8527,355.615 550.5583,356.5198 Q551.2639,357.4246 551.2639,358.8025 Q551.2639,360.6785 550.1557,361.604 Q549.0476,362.5296 546.8063,362.5296 Q545.885,362.5296 544.9594,362.3096 Q544.0339,362.0896 543.1706,361.658 L543.1706,359.1262 Q544.1501,359.8235 545.0673,360.1638 Q545.9846,360.5042 546.8811,360.5042 Q547.7858,360.5042 548.2839,360.0933 Q548.7819,359.6824 548.7819,358.9436 Q548.7819,358.3875 548.4499,357.9683 Q548.1179,357.5491 547.487,357.3084 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="52" x="577.7" y="352.5798">&#171;Service&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="564.2" y="368.6462">UserService</text><line style="stroke:#181818;stroke-width:0.5;" x1="517.5" x2="660.5" y1="376.5994" y2="376.5994"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="524.5" y="387.3435"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="536.5" y="394.1345">users: User[]</text><line style="stroke:#181818;stroke-width:0.5;" x1="517.5" x2="660.5" y1="401.0877" y2="401.0877"/><ellipse cx="527.5" cy="414.8318" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="536.5" y="418.6228">getUsers(): User[]</text></g><!--link DI to UserService--><g id="link_DI_UserService"><path codeLine="22" d="M263.3,98.0783 C347.16,99.7583 510.29,108.0883 550,146.9783 C599.92,195.8683 601.2159,276.926 596.1359,329.606 " fill="none" id="DI-to-UserService" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="595.56,335.5783,600.4054,327.0038,596.0399,330.6014,592.4423,326.2359,595.56,335.5783" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="591.05" y="160.5466">Cr&#233;e une instance (singleton)</text><path d="M585.55,172.7888 L585.55,190.7888 A3.5,3.5 0 0 0 589.05,194.2888 L776.05,194.2888 A3.5,3.5 0 0 0 779.55,190.7888 L779.55,179.2888 L769.55,169.2888 L589.05,169.2888 A3.5,3.5 0 0 0 585.55,172.7888 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M769.55,169.2888 L769.55,177.5388 A1.75,1.75 0 0 0 771.3,179.2888 L779.55,179.2888 L769.55,169.2888 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="591.55" y="186.8572">Gr&#226;ce &#224; `providedIn: 'root'`</text></g><!--link DI to UserListComponent--><g id="link_DI_UserListComponent"><path codeLine="25" d="M162.75,98.7683 C126.66,102.4683 80.26,113.9383 56,146.9783 C7.67,212.7983 84.9075,289.1919 146.6175,336.2119 " fill="none" id="DI-to-UserListComponent" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="151.39,339.8483,146.6555,331.212,147.4129,336.8179,141.807,337.5753,151.39,339.8483" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="57" y="178.0466">Cr&#233;e une instance</text></g><!--link DI to UserListComponent--><g id="link_DI_UserListComponent"><path codeLine="26" d="M211.69,115.0483 C211.04,124.4783 210.32,136.3683 210,146.9783 C207.94,214.6483 208.492,287.4289 209.172,333.8089 " fill="none" id="DI-to-UserListComponent-1" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="209.26,339.8083,213.1276,330.7506,209.1867,334.8088,205.1285,330.8679,209.26,339.8083" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="211" y="178.0466">Injecte l'instance de UserService dans le constructeur</text></g><!--link UserListComponent to UserService--><g id="link_UserListComponent_UserService"><path codeLine="28" d="M350.32,380.7783 C406.59,380.7783 463.08,380.7783 510,380.7783 " fill="none" id="UserListComponent-to-UserService" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="516,380.7783,507,376.7783,511,380.7783,507,384.7783,516,380.7783" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="368.25" y="374.3466">Appelle `getUsers()`</text></g><!--SRC=[TPB1Ri8m38RlUGglExJL1j9sh10QezfKQJUqqpI9q9ekepYLax83ubsctNYEljXIg1W5bakK-7VyvRUlx0Sk4LPgnfAiiCeM25v2dvXQfGaoXBZUbaYPf1ID9qGfquNCdUY9vHA_D2zWH7bLIFPWBG3qhCa5Rwp9IaN842SUIECsiJbAdtD_hdafcp9zKxAYVFy0G5f8O-3L8ByeOyTwMMf2icsqMJseN7I2l58fHZjfUpX8RY3LP2nNgTKS_2SFTth7rQtRHc4m22QtS3sAuxl7-n3Qw-7m2CM7XxrTSbPWi2vPhrI6MK8H-AorzJVX2RRP4xoz7x7cQ9ix4uITuAQnB4wWtnzsk28OSxr5g0X1kLyspO70E0yBj9f2GTeYkFuLYXOHF7FzumJrDqpF-QQT2bt7BzLfrBtBuhqH28L_W783T0pkniY06x53Rx1Y8SxVwft-TrIMMBZ4wPzJK_4B]--></g></svg></div></section><section class="chapter"><h2 id="exercice-pratique" data-toc="exercice-pratique">Exercice pratique</h2><section class="chapter"><h3 id="exercice-1-refactoriser-la-productlist" data-toc="exercice-1-refactoriser-la-productlist">Exercice 1 : Refactoriser la ProductList</h3><p id="-x9pjhb_122">Reprenons notre <code class="code" id="-x9pjhb_124">ProductListComponent</code> du module 5. Actuellement, la liste des produits est cod&eacute;e en dur &agrave; l'int&eacute;rieur du composant. Votre mission est de refactoriser ce code pour utiliser un service.</p><ol class="list _decimal" id="-x9pjhb_123" type="1"><li class="list__item" id="-x9pjhb_125"><p id="-x9pjhb_131">G&eacute;n&eacute;rez un nouveau service nomm&eacute; <code class="code" id="-x9pjhb_132">ProductService</code>.</p></li><li class="list__item" id="-x9pjhb_126"><p id="-x9pjhb_133">D&eacute;placez le tableau de produits <code class="code" id="-x9pjhb_134">products</code> depuis <code class="code" id="-x9pjhb_135">ProductListComponent</code> vers <code class="code" id="-x9pjhb_136">ProductService</code>. Rendez-le <code class="code" id="-x9pjhb_137">private</code>.</p></li><li class="list__item" id="-x9pjhb_127"><p id="-x9pjhb_138">Dans <code class="code" id="-x9pjhb_139">ProductService</code>, cr&eacute;ez une m&eacute;thode publique <code class="code" id="-x9pjhb_140">getProducts()</code> qui retourne ce tableau de produits.</p></li><li class="list__item" id="-x9pjhb_128"><p id="-x9pjhb_141">Dans <code class="code" id="-x9pjhb_142">ProductListComponent</code>, supprimez le tableau de produits en dur.</p></li><li class="list__item" id="-x9pjhb_129"><p id="-x9pjhb_143">Injectez <code class="code" id="-x9pjhb_144">ProductService</code> dans le constructeur de <code class="code" id="-x9pjhb_145">ProductListComponent</code>.</p></li><li class="list__item" id="-x9pjhb_130"><p id="-x9pjhb_146">Dans le constructeur (ou, mieux, dans une m&eacute;thode de cycle de vie que nous verrons plus tard comme <code class="code" id="-x9pjhb_147">ngOnInit</code>), appelez la m&eacute;thode <code class="code" id="-x9pjhb_148">getProducts()</code> du service pour peupler la liste des produits du composant.</p></li></ol></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-exercice-1" data-toc="correction-exercice-1">Correction exercice 1</h3></div><div class="collapse__content"><ol class="list _decimal" id="-x9pjhb_149" type="1"><li class="list__item" id="-x9pjhb_150"><p id="-x9pjhb_153"><span class="control" id="-x9pjhb_155">G&eacute;n&eacute;ration du service :</span></p><div class="code-block" data-lang="bash">
ng generate service shared/services/product
</div></li><li class="list__item" id="-x9pjhb_151"><p id="-x9pjhb_156">&amp; 3. <span class="control" id="-x9pjhb_158">Cr&eacute;ation du <code class="code" id="-x9pjhb_159">ProductService</code>:</span></p><div class="code-block" data-lang="ts">
// Fichier: src/app/shared/services/product.service.ts
import { Injectable } from '@angular/core';

// On pourrait mettre cette interface dans un fichier partagé
interface Product {
  id: number;
  name: string;
  price: number;
  inStock: boolean;
  releaseDate: Date;
}

@Injectable({
  providedIn: 'root'
})
export class ProductService {
  private products: Product[] = [
    { id: 101, name: 'souris gamer', price: 49.99, inStock: true, releaseDate: new Date(2023, 5, 15) },
    { id: 102, name: 'clavier mécanique', price: 120.50, inStock: false, releaseDate: new Date(2022, 11, 1) },
    { id: 103, name: 'tapis de souris xxl', price: 25.00, inStock: true, releaseDate: new Date(2023, 8, 20) }
  ];

  constructor() { }

  public getProducts(): Product[] {
    return this.products;
  }
}
</div></li><li class="list__item" id="-x9pjhb_152"><p id="-x9pjhb_160">&amp; 5. &amp; 6. <span class="control" id="-x9pjhb_163">Refactorisation de <code class="code" id="-x9pjhb_164">ProductListComponent</code>:</span></p><div class="code-block" data-lang="ts">
// Fichier: src/app/product-list/product-list.component.ts
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ProductService } from '../shared/services/product.service';

// On a toujours besoin de l'interface pour le typage dans le template
interface Product { /* ... */ }

@Component({
  selector: 'app-product-list',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './product-list.component.html'
})
export class ProductListComponent {
  // Le tableau est initialisé à vide
  public products: Product[] = [];

  // Injection du service
  constructor(private productService: ProductService) {
    // Appel au service pour récupérer les données
    this.products = this.productService.getProducts();
  }
}
</div><p id="-x9pjhb_162">Le template (<code class="code" id="-x9pjhb_165">.html</code>) du composant n'a pas besoin d'&ecirc;tre modifi&eacute;, ce qui prouve la qualit&eacute; de notre d&eacute;couplage !</p></li></ol></div></div></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="-x9pjhb_167"><span class="control" id="-x9pjhb_180">1. (Question ouverte)</span><br> En termes d'architecture, quelle est la responsabilit&eacute; principale d'un <span class="control" id="-x9pjhb_182">service Angular</span> par rapport &agrave; celle d'un composant ?</p><p id="-x9pjhb_169"><span class="control" id="-x9pjhb_183">2. (QCM)</span><br> Que signifie <code class="code" id="-x9pjhb_185">providedIn: 'root'</code> dans le d&eacute;corateur <code class="code" id="-x9pjhb_186">@Injectable</code>?</p><ul class="list _bullet" id="-x9pjhb_170"><li class="list__item" id="-x9pjhb_187"><p id="-x9pjhb_191">a) Que le service ne peut &ecirc;tre utilis&eacute; que par le composant racine (<code class="code" id="-x9pjhb_192">AppComponent</code>).</p></li><li class="list__item" id="-x9pjhb_188"><p id="-x9pjhb_193">b) Que le service est un singleton disponible dans toute l'application.</p></li><li class="list__item" id="-x9pjhb_189"><p id="-x9pjhb_194">c) Que le service doit &ecirc;tre import&eacute; dans le fichier <code class="code" id="-x9pjhb_195">main.ts</code>.</p></li><li class="list__item" id="-x9pjhb_190"><p id="-x9pjhb_196">d) Que le service a des privil&egrave;ges d'administrateur.</p></li></ul><p id="-x9pjhb_172"><span class="control" id="-x9pjhb_197">3. (QCM)</span><br> Quelle est la mani&egrave;re standard d'obtenir une instance d'un service dans un composant ?</p><ul class="list _bullet" id="-x9pjhb_173"><li class="list__item" id="-x9pjhb_199"><p id="-x9pjhb_203">a) En l'instanciant avec <code class="code" id="-x9pjhb_204">new MyService()</code>.</p></li><li class="list__item" id="-x9pjhb_200"><p id="-x9pjhb_205">b) En l'important et en l'ajoutant au tableau <code class="code" id="-x9pjhb_206">providers</code> du composant.</p></li><li class="list__item" id="-x9pjhb_201"><p id="-x9pjhb_207">c) En le d&eacute;clarant comme un param&egrave;tre du constructeur avec un modificateur d'acc&egrave;s.</p></li><li class="list__item" id="-x9pjhb_202"><p id="-x9pjhb_208">d) En utilisant une m&eacute;thode globale <code class="code" id="-x9pjhb_209">getService(MyService)</code>.</p></li></ul><p id="-x9pjhb_175"><span class="control" id="-x9pjhb_210">4. (Question ouverte)</span><br> Vous avez deux composants, <code class="code" id="-x9pjhb_212">ComponentA</code> et <code class="code" id="-x9pjhb_213">ComponentB</code>, qui ne sont pas li&eacute;s (ni parent, ni enfant). <br> Comment peuvent-ils partager une donn&eacute;e commune (par exemple, le nom de l'utilisateur connect&eacute;) ?</p><p id="-x9pjhb_177"><span class="control" id="-x9pjhb_215">5. (QCM)</span><br> Quel principe de conception est le mieux respect&eacute; lorsque vous d&eacute;placez la logique d'appel &agrave; une API depuis un composant vers un service ?</p><ul class="list _bullet" id="-x9pjhb_178"><li class="list__item" id="-x9pjhb_217"><p id="-x9pjhb_221">a) DRY (Don't Repeat Yourself)</p></li><li class="list__item" id="-x9pjhb_218"><p id="-x9pjhb_222">b) KISS (Keep It Simple, Stupid)</p></li><li class="list__item" id="-x9pjhb_219"><p id="-x9pjhb_223">c) SRP (Single Responsibility Principle)</p></li><li class="list__item" id="-x9pjhb_220"><p id="-x9pjhb_224">d) YAGNI (You Ain't Gonna Need It)</p></li></ul></section><section class="chapter"><h2 id="conclusion-de-cette-partie" data-toc="conclusion-de-cette-partie">Conclusion de cette partie</h2><p id="-x9pjhb_225">F&eacute;licitations ! Vous venez d'appliquer l'un des patterns d'architecture les plus importants du d&eacute;veloppement logiciel moderne. Vous savez maintenant comment :</p><ul class="list _bullet" id="-x9pjhb_226"><li class="list__item" id="-x9pjhb_229"><p id="-x9pjhb_232"><span class="control" id="-x9pjhb_233">Centraliser</span> la logique m&eacute;tier dans des <span class="control" id="-x9pjhb_234">services</span> r&eacute;utilisables.</p></li><li class="list__item" id="-x9pjhb_230"><p id="-x9pjhb_235"><span class="control" id="-x9pjhb_236">D&eacute;coupler</span> vos composants de la source de donn&eacute;es, les rendant plus simples et plus cibl&eacute;s sur leur r&ocirc;le de pr&eacute;sentation.</p></li><li class="list__item" id="-x9pjhb_231"><p id="-x9pjhb_237">Utiliser la puissance de l' <span class="control" id="-x9pjhb_238">injection de d&eacute;pendances</span> d'Angular, un m&eacute;canisme qui vous est d&eacute;j&agrave; tr&egrave;s familier gr&acirc;ce &agrave; Spring.</p></li></ul><p id="-x9pjhb_227">Cette structure est la base d'une application saine, testable et &eacute;volutive.</p><p id="-x9pjhb_228">Dans la partie &quot;Pour aller plus loin&quot;, nous explorerons des concepts plus avanc&eacute;s de l'injection de d&eacute;pendances, comme les diff&eacute;rents niveaux de fournisseurs (providers) et l'utilisation de <code class="code" id="-x9pjhb_239">InjectionToken</code>. Et dans le module suivant, nous connecterons enfin notre <code class="code" id="-x9pjhb_240">UserService</code> &agrave; une v&eacute;ritable API REST gr&acirc;ce au <code class="code" id="-x9pjhb_241">HttpClient</code>.</p></section><div class="last-modified">16 août 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="005-01-custom-pipes-and-directives.html" class="navigation-links__prev">Module 5 : Pour aller plus loin - Cr&eacute;er vos Propres Pipes et Directives</a><a href="006-01-adavanced-di.html" class="navigation-links__next">Module 6 : Pour aller plus loin - Ma&icirc;trise de l'Injection de D&eacute;pendances</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>