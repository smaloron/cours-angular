<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-08-16T16:38:33.22656"><title>Module 10 : L'essentiel - RxJS, Penser en Flux de Donn&eacute;es | Angular</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-de-la-plomberie-simple-l-usine-de-traitement","level":0,"title":"Introduction : De la plomberie simple à l\u0027usine de traitement","anchor":"#introduction-de-la-plomberie-simple-l-usine-de-traitement"},{"id":"1-penser-en-streams-avec-pipe","level":0,"title":"1. Penser en \"Streams\" avec .pipe()","anchor":"#1-penser-en-streams-avec-pipe"},{"id":"2-op-rateurs-de-transformation-et-de-filtrage","level":0,"title":"2. Opérateurs de Transformation et de Filtrage","anchor":"#2-op-rateurs-de-transformation-et-de-filtrage"},{"id":"3-le-pipe-async-la-magie-de-la-d-sinscription-automatique","level":0,"title":"3. Le Pipe async : La Magie de la Désinscription Automatique","anchor":"#3-le-pipe-async-la-magie-de-la-d-sinscription-automatique"},{"id":"exercice-pratique","level":0,"title":"Exercice pratique","anchor":"#exercice-pratique"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-de-cette-partie","level":0,"title":"Conclusion de cette partie","anchor":"#conclusion-de-cette-partie"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 10 : L'essentiel - RxJS, Penser en Flux de Donn&eacute;es | Angular"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Angular Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/010-00-rxjs-streams.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 10 : L'essentiel - RxJS, Penser en Flux de Donn&eacute;es | Angular"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/010-00-rxjs-streams.html#webpage",
    "url": "writerside-documentation/010-00-rxjs-streams.html",
    "name": "Module 10 : L'essentiel - RxJS, Penser en Flux de Donn&eacute;es | Angular",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Angular Help"
}</script><!-- End Schema.org --></head><body data-id="010-00-rxjs-streams" data-main-title="Module 10 : L'essentiel - RxJS, Penser en Flux de Données" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Angular  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="010-00-rxjs-streams" id="010-00-rxjs-streams.md">Module 10 : L'essentiel - RxJS, Penser en Flux de Données</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="d5davl_11">&Agrave; la fin de ce chapitre, vous serez capable de :</p><ul class="list _bullet" id="d5davl_12"><li class="list__item" id="d5davl_13"><p id="d5davl_17"><span class="control" id="d5davl_18">Adopter</span> une mentalit&eacute; de &quot;flux de donn&eacute;es&quot; (streams) pour le traitement asynchrone.</p></li><li class="list__item" id="d5davl_14"><p id="d5davl_19"><span class="control" id="d5davl_20">Utiliser</span> la m&eacute;thode <code class="code" id="d5davl_21">.pipe()</code> pour cr&eacute;er des cha&icirc;nes de traitement de donn&eacute;es (pipelines).</p></li><li class="list__item" id="d5davl_15"><p id="d5davl_22"><span class="control" id="d5davl_24">Ma&icirc;triser</span> les op&eacute;rateurs fondamentaux :</p><ul class="list _bullet" id="d5davl_23"><li class="list__item" id="d5davl_25"><p id="d5davl_28"><code class="code" id="d5davl_29">map</code> pour transformer les donn&eacute;es.</p></li><li class="list__item" id="d5davl_26"><p id="d5davl_30"><code class="code" id="d5davl_31">filter</code> pour filtrer les donn&eacute;es (au sein d'un <code class="code" id="d5davl_32">map</code>).</p></li><li class="list__item" id="d5davl_27"><p id="d5davl_33"><code class="code" id="d5davl_34">tap</code> pour effectuer des actions sans modifier le flux (effets de bord).</p></li></ul></li><li class="list__item" id="d5davl_16"><p id="d5davl_35"><span class="control" id="d5davl_36">Exploiter</span> le pipe <code class="code" id="d5davl_37">async</code> dans les templates pour une gestion automatique et s&eacute;curis&eacute;e des abonnements.</p></li></ul></section><section class="chapter"><h2 id="introduction-de-la-plomberie-simple-l-usine-de-traitement" data-toc="introduction-de-la-plomberie-simple-l-usine-de-traitement">Introduction : De la plomberie simple &agrave; l'usine de traitement</h2><p id="d5davl_38">Imaginez que votre appel HTTP est un tuyau qui am&egrave;ne de l'eau brute (la r&eacute;ponse de l'API) &agrave; votre maison (le composant). Dans le module pr&eacute;c&eacute;dent, nous avons appris &agrave; ouvrir le robinet (<code class="code" id="d5davl_41">.subscribe()</code>) et &agrave; r&eacute;cup&eacute;rer cette eau.</p><p id="d5davl_39">Mais que faire si cette eau n'est pas tout &agrave; fait comme nous la voulons ? Si elle est trouble ? Si nous ne voulons que l'eau chaude ? Si nous voulons l'analyser avant de l'utiliser ?</p><p id="d5davl_40">C'est l&agrave; qu'intervient la puissance de RxJS. Au lieu d'un simple tuyau, vous allez construire une v&eacute;ritable <span class="control" id="d5davl_42">usine de traitement</span>. Vous allez installer des filtres, des stations d'enrichissement, des points de contr&ocirc;le... tout cela * <span class="emphasis" id="d5davl_43">dans le tuyau lui-m&ecirc;me</span>*. Votre composant, &agrave; la fin, ne recevra plus de l'eau brute, mais une eau parfaitement purifi&eacute;e, &agrave; la bonne temp&eacute;rature et pr&ecirc;te &agrave; l'emploi. Cette usine, c'est le <code class="code" id="d5davl_44">.pipe()</code>, et ses stations, ce sont les * <span class="emphasis" id="d5davl_45">op&eacute;rateurs</span>*.</p></section><section class="chapter"><h2 id="1-penser-en-streams-avec-pipe" data-toc="1-penser-en-streams-avec-pipe">1. Penser en &quot;Streams&quot; avec <code class="code" id="d5davl_50">.pipe()</code></h2><p id="d5davl_47">La m&eacute;thode <code class="code" id="d5davl_51">.pipe()</code> d'un Observable est votre cha&icirc;ne de montage. Elle vous permet d'encha&icirc;ner des op&eacute;rateurs, qui sont des fonctions pures qui prennent un Observable en entr&eacute;e et en retournent un nouveau, modifi&eacute;.</p><p id="d5davl_48">Chaque donn&eacute;e &eacute;mise par l'Observable source va passer &agrave; travers chaque op&eacute;rateur du <code class="code" id="d5davl_52">pipe</code>, l'un apr&egrave;s l'autre, avant d'arriver au <code class="code" id="d5davl_53">subscribe</code> final.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="612px" preserveAspectRatio="none" style="width:371px;height:612px;background:#FFFFFF;" version="1.1" viewBox="0 0 371 612" width="371px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="116" x="120.5" y="23.5352">Le Pipeline RxJS</text><!--entity api--><g id="elem_api"><path d="M209.9629,55.4071 C213.7335,45.3421 221.4312,43.4883 228.8706,51.5884 C235.0781,44.3336 243.6944,45.7805 246.2801,55.3387 C253.4898,57.8535 254.9205,64.3908 249.5782,69.7735 C257.2146,76.5933 254.093,83.1519 245.6022,86.0265 C244.6765,96.6376 238.3394,101.8783 228.0264,96.0828 C216.8496,102.3759 211.4128,98.6063 210.2346,86.4438 C200.0719,85.7792 197.9934,78.962 203.0228,71.1388 C197.7568,63.7373 201.4549,56.7322 209.9629,55.4071 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="216.5" y="74.6652">API</text></g><!--entity source--><g id="elem_source"><rect fill="#F1F1F1" height="36.4883" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="175" x="140" y="153.6201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="150" y="177.1552">Observable&lt;rawData&gt;</text></g><!--entity subscriber--><g id="elem_subscriber"><ellipse cx="80.5" cy="522.0201" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M80.5,530.0201 L80.5,557.0201 M67.5,538.0201 L93.5,538.0201 M80.5,557.0201 L67.5,572.0201 M80.5,557.0201 L93.5,572.0201 " fill="none" style="stroke:#454645;stroke-width:0.5;"/><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="40.5" y="587.0552">Composant</text><text fill="#454645" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="40.5" y="603.5435">(.subscribe)</text></g><!--entity op1--><g id="elem_op1"><rect fill="#F1F1F1" height="36.4883" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="149" x="153" y="267.1001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="163" y="290.6352">Op&#233;rateur 1 (filter)</text></g><!--entity op2--><g id="elem_op2"><rect fill="#F1F1F1" height="36.4883" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="7" y="390.3101"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="17" y="413.8452">Op&#233;rateur 2 (map)</text></g><g id="elem_GMN11"><path d="M189,384.0901 L189,433.0217 A3.5,3.5 0 0 0 192.5,436.5217 L360.5,436.5217 A3.5,3.5 0 0 0 364,433.0217 L364,390.5901 L354,380.5901 L269.56,380.5901 L234.63,303.9701 L261.56,380.5901 L192.5,380.5901 A3.5,3.5 0 0 0 189,384.0901 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M354,380.5901 L354,388.8401 A1.75,1.75 0 0 0 355.75,390.5901 L364,390.5901 L354,380.5901 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="195" y="398.1584">.pipe()</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="195" y="413.469">Contient les op&#233;rateurs</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="195" y="428.7795">qui transforment le flux.</text></g><!--link api to source--><g id="link_api_source"><path d="M227.5,92.9201 C227.5,111.2101 227.5,130.6101 227.5,147.3801 " fill="none" id="api-to-source" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="227.5,153.3801,231.5,144.3801,227.5,148.3801,223.5,144.3801,227.5,153.3801" style="stroke:#454645;stroke-width:1.0;"/></g><!--link source to op1--><g id="link_source_op1"><path d="M227.5,190.2801 C227.5,211.1001 227.5,239.7501 227.5,260.6801 " fill="none" id="source-to-op1" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="227.5,266.6801,231.5,257.6801,227.5,261.6801,223.5,257.6801,227.5,266.6801" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="228.5" y="233.6684">DataBrute</text></g><!--link op1 to op2--><g id="link_op1_op2"><path d="M205.7,304.0201 C194.81,312.8701 181.43,323.7701 169.5,333.5901 C146.23,352.7401 124.2768,370.9959 106.2768,386.0159 " fill="none" id="op1-to-op2" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="101.67,389.8601,111.143,387.1651,105.509,386.6566,106.0175,381.0227,101.67,389.8601" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="170.5" y="347.1584">DataFiltr&#233;e</text></g><!--link op2 to subscriber--><g id="link_op2_subscriber"><path d="M80.5,427.2901 C80.5,448.3201 80.5,478.1801 80.5,507.1801 " fill="none" id="op2-to-subscriber" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="80.5,513.1801,84.5,504.1801,80.5,508.1801,76.5,504.1801,80.5,513.1801" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="81.5" y="480.0884">DataTransform&#233;e</text></g><!--SRC=[TP31JiCm38RlUGhJKtTOqNf4LIKsX0H2OWAEN9BEXKXf4Xndx9Ns77inacL5ui39yk_Flt_vYZznGjXhHTAoOCq6eNf2s6gFHbk4byFZQoN4O5pSGNMxVQX01f1U2yA1fVt82yyg8EsbCjYH_BwJBFip5boa0OKSs15K6pTv5zATTrit8Qema5QuAEJSaX1_dFtfI98n4goW7hLXfBBX_EeVi8LwadwcscIOui9osSzvIZahoGLk82TUKsGKkIzwUz7lqqqw7VEeBIQ_KI_4M_fT61rDcHBMCO9op6u2DvvZ0dIgRtnwQRtehbMVX8sphD4o6CmXv-mXZRwY1fuj2mAZYOT6eDr1jXS_]--></g></svg></div></section><section class="chapter"><h2 id="2-op-rateurs-de-transformation-et-de-filtrage" data-toc="2-op-rateurs-de-transformation-et-de-filtrage">2. Op&eacute;rateurs de Transformation et de Filtrage</h2><p id="d5davl_54">Ce sont les outils que vous utiliserez le plus souvent.</p><section class="chapter"><h3 id="map-transformer-chaque-valeur-mise" data-toc="map-transformer-chaque-valeur-mise"><code class="code" id="d5davl_63">map()</code>: Transformer chaque valeur &eacute;mise</h3><p id="d5davl_59"><code class="code" id="d5davl_64">map</code> prend la valeur &eacute;mise par l'Observable et la transforme en autre chose. C'est une station de &quot;peinture&quot; sur votre cha&icirc;ne de montage.</p><p id="d5davl_60"><span class="control" id="d5davl_65">Sc&eacute;nario :</span> Notre API nous retourne une liste d'utilisateurs (<code class="code" id="d5davl_66">User[]</code>), mais notre composant n'a besoin que d'une liste de noms (<code class="code" id="d5davl_67">string[]</code>).</p><div class="code-block" data-lang="ts">
// Fichier: user.service.ts
import {map} from 'rxjs/operators';
import {Observable} from 'rxjs';

public getUserNames(): Observable &lt; string[] &gt; {
    return this.http.get&lt;User[]&gt;(this.apiUrl).pipe(
        // map reçoit le tableau de User[]
        map(users =&gt; {
            // On utilise le .map() des tableaux JS pour transformer chaque user
            return users.map(user =&gt; user.name);
        })
        // Ce qui sort du map est maintenant un tableau de string[]
    );
}
</div><p id="d5davl_62">Le composant qui s'abonne &agrave; <code class="code" id="d5davl_68">getUserNames()</code> recevra directement un <code class="code" id="d5davl_69">string[]</code>, sans jamais voir la structure compl&egrave;te de l'objet <code class="code" id="d5davl_70">User</code>.</p></section><section class="chapter"><h3 id="filter-laisser-passer-ou-bloquer" data-toc="filter-laisser-passer-ou-bloquer"><code class="code" id="d5davl_76">filter()</code>: Laisser passer ou bloquer</h3><p id="d5davl_72">L'op&eacute;rateur <code class="code" id="d5davl_77">filter</code> permet de d&eacute;cider si une valeur doit continuer son chemin dans le pipeline.</p><aside class="prompt" data-type="warning" data-title="" id="d5davl_73"><p>`filter` est plus utile pour les flux qui &eacute;mettent plusieurs valeurs (ex: clics). Pour un appel HTTP, qui n'&eacute;met qu'une seule valeur (le tableau entier), on utilise plut&ocirc;t la m&eacute;thode `.filter()` des tableaux **&agrave; l'int&eacute;rieur** d'un `map` pour filtrer les *&eacute;l&eacute;ments du tableau*.</p></aside><p id="d5davl_74"><span class="control" id="d5davl_78">Sc&eacute;nario :</span> R&eacute;cup&eacute;rer uniquement les utilisateurs dont l'ID est sup&eacute;rieur &agrave; 5.</p><div class="code-block" data-lang="ts">
// Fichier: user.service.ts
import {map} from 'rxjs/operators';

public getHighIdUsers(): Observable &lt; User[] &gt; {
    return this.http.get&lt;User[]&gt;(this.apiUrl).pipe(
        // On utilise map pour transformer le tableau
        map(users =&gt;
            // Et le .filter() des tableaux JS pour filtrer son contenu
            users.filter(user =&gt; user.id &gt; 5)
        )
    );
}
</div></section><section class="chapter"><h3 id="tap-l-observateur-discret" data-toc="tap-l-observateur-discret"><code class="code" id="d5davl_82">tap()</code>: L'observateur discret</h3><p id="d5davl_80"><code class="code" id="d5davl_83">tap</code> (anciennement <code class="code" id="d5davl_84">do</code>) est votre outil de d&eacute;bogage. Il vous permet d'&quot;espionner&quot; le flux &agrave; un certain point, d'ex&eacute;cuter une action (comme un <code class="code" id="d5davl_85">console.log</code>), <span class="control" id="d5davl_86">sans modifier la donn&eacute;e qui passe</span>. C'est la cam&eacute;ra de surveillance sur votre cha&icirc;ne de montage.</p><div class="code-block" data-lang="ts">
// Fichier: user.service.ts
import {map, tap} from 'rxjs/operators';

public getUsers(): Observable &lt; User[] &gt; {
    return this.http.get&lt;User[]&gt;(this.apiUrl).pipe(
        tap(users =&gt; console.log(`[TAP] Avant transformation: ${users.length} utilisateurs`)),
        map(users =&gt; users.filter(user =&gt; user.id &gt; 5)),
        tap(users =&gt; console.log(`[TAP] Après transformation: ${users.length} utilisateurs`))
    );
}
</div></section></section><section class="chapter"><h2 id="3-le-pipe-async-la-magie-de-la-d-sinscription-automatique" data-toc="3-le-pipe-async-la-magie-de-la-d-sinscription-automatique">3. Le Pipe <code class="code" id="d5davl_95">async</code>: La Magie de la D&eacute;sinscription Automatique</h2><p id="d5davl_88"><span class="control" id="d5davl_96">Le Probl&egrave;me :</span> Chaque fois que vous faites un <code class="code" id="d5davl_97">.subscribe()</code> dans un composant, vous cr&eacute;ez un abonnement. Si vous ne vous d&eacute;sabonnez pas manuellement lorsque le composant est d&eacute;truit, cet abonnement continue de vivre en m&eacute;moire. C'est ce qu'on appelle une <span class="control" id="d5davl_98">fuite de m&eacute;moire</span>.</p><p id="d5davl_89">La solution manuelle est fastidieuse :</p><div class="code-block" data-lang="ts">
// La &quot;vieille&quot; manière, à éviter si possible
export class UserListComponent implements OnInit, OnDestroy {
    private subscription: Subscription = new Subscription();

    ngOnInit(): void {
        this.subscription = this.userService
                                .getUsers()
                                .subscribe(
                                    users =...
                                );
    }

    ngOnDestroy(): void {
        // Il ne faut JAMAIS oublier de se désabonner !
        this.subscription.unsubscribe();
    }
}
</div><p id="d5davl_91"><span class="control" id="d5davl_99">La Solution Magique : <code class="code" id="d5davl_101">| async</code></span> Angular nous offre un Pipe <code class="code" id="d5davl_100">async</code> qui fait tout le travail pour nous.</p><ol class="list _decimal" id="d5davl_92" type="1"><li class="list__item" id="d5davl_102"><p id="d5davl_105">Il s'abonne &agrave; l'Observable &agrave; notre place.</p></li><li class="list__item" id="d5davl_103"><p id="d5davl_106">Il retourne la derni&egrave;re valeur &eacute;mise.</p></li><li class="list__item" id="d5davl_104"><p id="d5davl_107">Il se d&eacute;sabonne automatiquement lorsque le composant est d&eacute;truit.</p></li></ol><p id="d5davl_93">C'est la <span class="control" id="d5davl_108">meilleure pratique</span> pour consommer des Observables dans un template.</p><div class="tabs" id="d5davl_94" data-anchors="[d5davl_109,d5davl_110]"><div class="tabs__content" data-gtm="tab" id="d5davl_109" data-title="Avant (avec .subscribe())"><p>```typescript // Fichier: user-list.component.ts export class UserListComponent implements OnInit { public users: User[] = []; public isLoading = true; </p><p id="d5davl_111">constructor(private userService: UserService) {}</p><p id="d5davl_112">ngOnInit(): void { this.userService.getUsers().subscribe(data =&gt; ); } }</p><div class="code-block" data-lang="none" data-title="None">
```html
&lt;!-- Fichier: user-list.component.html --&gt;
@if(!isLoading) {
  &lt;ul&gt;
    @for(user of users; track user.id) {
      &lt;li&gt;{{ user.name }}&lt;/li&gt;
    }
  &lt;/ul&gt;
}
</div></div><div class="tabs__content" data-gtm="tab" id="d5davl_110" data-title="Apr&egrave;s (avec le pipe async)"><div class="code-block" data-lang="ts" data-title="TypeScript">
// Fichier: user-list.component.ts
export class UserListComponent {
  // On ne s'abonne plus ! On stocke juste l'Observable.
  // Le '$' à la fin est une convention pour indiquer une variable Observable.
  public users$: Observable&lt;User[]&gt;;

constructor(private userService: UserService) {
this.users$ = this.userService.getUsers();
}
}

</div><div class="code-block" data-lang="markup" data-title="HTML">
&lt;!-- Fichier: user-list.component.html --&gt;
&lt;!-- Le pipe 'async' gère le 'isLoading' et la donnée --&gt;
@if (users$ | async; as users) {
  &lt;ul&gt;
    &lt;!-- On utilise la variable 'users' créée par le @if --&gt;
    @for(user of users; track user.id) {
      &lt;li&gt;{{ user.name }}&lt;/li&gt;
    }
  &lt;/ul&gt;
} @else {
  &lt;p&gt;Chargement...&lt;/p&gt;
}
</div><p id="d5davl_116">Le code est plus simple, plus d&eacute;claratif, et surtout, plus s&ucirc;r !</p></div></div></section><section class="chapter"><h2 id="exercice-pratique" data-toc="exercice-pratique">Exercice pratique</h2><section class="chapter"><h3 id="exercice-1-pr-parer-des-donn-es-pour-l-affichage" data-toc="exercice-1-pr-parer-des-donn-es-pour-l-affichage">Exercice 1 : Pr&eacute;parer des Donn&eacute;es pour l'Affichage</h3><p id="d5davl_119">Cr&eacute;ez une m&eacute;thode dans votre <code class="code" id="d5davl_121">ProductService</code> qui r&eacute;cup&egrave;re des produits et les pr&eacute;pare pour une carte de &quot;Produits en promotion&quot;.</p><ol class="list _decimal" id="d5davl_120" type="1"><li class="list__item" id="d5davl_122"><p id="d5davl_127">Cr&eacute;ez une m&eacute;thode <code class="code" id="d5davl_128">getFeaturedProducts()</code> qui retourne un <code class="code" id="d5davl_129">Observable&lt;FeaturedProduct[]&gt;</code>.</p></li><li class="list__item" id="d5davl_123"><p id="d5davl_130">L'interface <code class="code" id="d5davl_131">FeaturedProduct</code> sera plus simple : <code class="code" id="d5davl_132">{ id: number, name: string, discountedPrice: number }</code>.</p></li><li class="list__item" id="d5davl_124"><p id="d5davl_133">Dans cette m&eacute;thode, faites un appel <code class="code" id="d5davl_134">GET</code> &agrave; votre API de produits.</p></li><li class="list__item" id="d5davl_125"><p id="d5davl_135">Dans le <code class="code" id="d5davl_136">.pipe()</code>, encha&icirc;nez les op&eacute;rateurs pour : a. Filtrer les produits pour ne garder que ceux qui ont un prix sup&eacute;rieur &agrave; 50. b. Transformer (<code class="code" id="d5davl_137">map</code>) le tableau de <code class="code" id="d5davl_138">Product[]</code> restant en un tableau de <code class="code" id="d5davl_139">FeaturedProduct[]</code>. Le <code class="code" id="d5davl_140">discountedPrice</code> sera le prix original moins 10%. c. Utilisez <code class="code" id="d5davl_141">tap</code> pour afficher dans la console le nombre de produits en promotion trouv&eacute;s.</p></li><li class="list__item" id="d5davl_126"><p id="d5davl_142">Dans un composant, utilisez le pipe <code class="code" id="d5davl_143">async</code> pour afficher le r&eacute;sultat.</p></li></ol></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-exercice-1" data-toc="correction-exercice-1">Correction exercice 1</h3></div><div class="collapse__content"><p id="d5davl_144"><span class="control" id="d5davl_150"><code class="code" id="d5davl_151">product.service.ts</code></span></p><div class="code-block" data-lang="ts">
import {map, tap} from 'rxjs/operators';
import {Observable} from 'rxjs';

// Le modèle de données simplifié
export interface FeaturedProduct {
    id: number;
    name: string;
    discountedPrice: number;
}

// ... dans la classe ProductService
public getFeaturedProducts(): Observable &lt; FeaturedProduct[] &gt; {
    return this.http.get&lt;Product[]&gt;(this.apiUrl).pipe(
        // 1. Transformer le tableau de produits
        map(products =&gt;
            // 1a. D'abord, on filtre
            products.filter(p =&gt; p.price &gt; 50)
                // 1b. Ensuite, on transforme chaque produit filtré
                .map(p =&gt; ({
                    id: p.id,
                    name: p.name.toUpperCase(),
                    discountedPrice: p.price * 0.9
                }))
        ),
        // 2. Observer le résultat final
        tap(featured =&gt; console.log(`${featured.length} produits en promotion trouvés.`))
    );
}
</div><p id="d5davl_146"><span class="control" id="d5davl_152"><code class="code" id="d5davl_153">featured-products.component.ts</code></span></p><div class="code-block" data-lang="ts">
import {Component} from '@angular/core';
import {ProductService, FeaturedProduct} from '...';
import {Observable} from 'rxjs';

@Component({ /* ... */})
export class FeaturedProductsComponent {
    public featuredProducts$: Observable&lt;FeaturedProduct[]&gt;;

    constructor(private productService: ProductService) {
        this.featuredProducts$ = this.productService.getFeaturedProducts();
    }
}
</div><p id="d5davl_148"><span class="control" id="d5davl_154"><code class="code" id="d5davl_155">featured-products.component.html</code></span></p><div class="code-block" data-lang="markup">
&lt;h2&gt;Produits en Promotion&lt;/h2&gt;
@if (featuredProducts$ | async; as products) {
&lt;ul&gt;
    @for(product of products; track product.id) {
    &lt;li&gt;
        {{ product.name }} -
        &lt;strong&gt;{{ product.discountedPrice | currency:'EUR' }}&lt;/strong&gt;
    &lt;/li&gt;
    }
&lt;/ul&gt;
}
</div></div></div></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="d5davl_156" type="1"><li class="list__item" id="d5davl_157"><p id="d5davl_162"><span class="control" id="d5davl_163">(Question ouverte)</span> Quel est le r&ocirc;le principal de la m&eacute;thode <code class="code" id="d5davl_164">.pipe()</code> sur un Observable ?</p></li><li class="list__item" id="d5davl_158"><p id="d5davl_165"><span class="control" id="d5davl_166">(QCM)</span> Vous recevez un <code class="code" id="d5davl_167">Observable&lt;string&gt;</code> et vous voulez le transformer en <code class="code" id="d5davl_168">Observable&lt;number&gt;</code> qui &eacute;met la longueur de la cha&icirc;ne. Quel op&eacute;rateur utiliser ? a) <code class="code" id="d5davl_169">tap(str =&gt; str.length)</code> b) <code class="code" id="d5davl_170">map(str =&gt; str.length)</code> c) <code class="code" id="d5davl_171">filter(str =&gt; str.length &gt; 0)</code> d) <code class="code" id="d5davl_172">switchMap(str =&gt; of(str.length))</code></p></li><li class="list__item" id="d5davl_159"><p id="d5davl_173"><span class="control" id="d5davl_174">(QCM)</span> Quel est le principal avantage du pipe <code class="code" id="d5davl_175">async</code> par rapport &agrave; un appel manuel &agrave; <code class="code" id="d5davl_176">.subscribe()</code>? a) Il rend le code plus rapide. b) Il g&egrave;re automatiquement la d&eacute;sinscription, pr&eacute;venant les fuites de m&eacute;moire. c) Il g&egrave;re automatiquement les erreurs HTTP. d) Il permet d'utiliser plusieurs Observables &agrave; la fois.</p></li><li class="list__item" id="d5davl_160"><p id="d5davl_177"><span class="control" id="d5davl_178">(Question ouverte)</span> Vous voulez afficher un message dans la console chaque fois qu'un Observable &eacute;met une valeur, sans changer cette valeur. Quel op&eacute;rateur est le plus appropri&eacute; et pourquoi ?</p></li><li class="list__item" id="d5davl_161"><p id="d5davl_179"><span class="control" id="d5davl_180">(QCM)</span> Comment se nomme la convention de nommage pour une variable qui contient un Observable ? a) On la pr&eacute;fixe avec <code class="code" id="d5davl_181">obs_</code>. b) On la met en majuscules. c) On la suffixe avec un <code class="code" id="d5davl_182">$</code>. d) Il n'y a pas de convention.</p></li></ol></section><section class="chapter"><h2 id="conclusion-de-cette-partie" data-toc="conclusion-de-cette-partie">Conclusion de cette partie</h2><p id="d5davl_183">Vous venez de faire un pas de g&eacute;ant dans la ma&icirc;trise d'Angular. Vous ne voyez plus les donn&eacute;es comme une simple valeur &agrave; recevoir, mais comme un <span class="control" id="d5davl_186">flux que vous pouvez sculpter</span>. Vous savez utiliser les op&eacute;rateurs de base comme <code class="code" id="d5davl_187">map</code>, <code class="code" id="d5davl_188">filter</code> et <code class="code" id="d5davl_189">tap</code> pour nettoyer et pr&eacute;parer vos donn&eacute;es avant m&ecirc;me qu'elles n'atteignent vos composants.</p><p id="d5davl_184">Plus important encore, vous avez adopt&eacute; la pratique la plus moderne et la plus s&ucirc;re pour afficher des donn&eacute;es asynchrones gr&acirc;ce au pipe <code class="code" id="d5davl_190">async</code>, rendant votre code plus d&eacute;claratif et moins sujet aux erreurs.</p><p id="d5davl_185">Dans la partie &quot;Pour aller plus loin&quot; de ce module, nous allons aborder les op&eacute;rateurs plus complexes qui g&egrave;rent les sc&eacute;narios les plus difficiles : les appels HTTP en cha&icirc;ne avec <code class="code" id="d5davl_191">switchMap</code>.</p></section><div class="last-modified">10 août 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="009-01-adavanced-reactive-forms.html" class="navigation-links__prev">Module 9 : Pour aller plus loin - Formulaires R&eacute;actifs Avanc&eacute;s</a><a href="010-01-advanced-rxjs.html" class="navigation-links__next">Module 10 : Pour aller plus loin - Op&eacute;rateurs de Combinaison et d'Aplatissement</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>